---
title: Javascript (Client Side)
layout: dep
---



<!DOCTYPE html>
<html>
<head>
    <title>Digital Clock</title>
    <script>
        window.onload =
        () => {
            alert("window onload ");
            displayTime()
        };

    document.getElementById("button0").onclick =
        () => { alert("Button 0 is clicked") };
    handleResponse =
        () => { alert("handle Response"); }
    request.onreadystatechange = handleResponse ;

    window.addEventListener("xload", ()=>{ alert("hoge") }, false)



    onLoad = (f)=> {
        if (onLoad.loaded)
            window.setTimeout( f,-1 );
        else if (window.addEventListener)
            window.addEventListener("load", f, false);
        else if (window.attachEvent)
            window.attachEvent("onload", f);
    }
    onLoad.loaded = false;
    onLoad(()=>{ onLoad.loaded = true; alert ( "Document Loaded" );
    })

    </script>
<style>
#clock {
    font: bold 24pt sans;
    background: #ddf;
    padding: 10px;
    border: solid black 2px;
    border-radius: 10px;
}
</style>
</head>
<body>
    <h1>Digital Clock</h1>
    <script>
    var displayTime = () => {
        var elt = document.getElementById("clock");
        var now = new Date();
        elt.innerHTML = now.toLocaleTimeString();
        setTimeout(displayTime, 999);
    };
    </script>
    <span id="clock"></span>
    <input type="checkbox" name="options"
    value="giftwrap"
    onchange="order.options.giftwrap =
    this.checker;" >




    <br><br><br>

    <p>
    Bookmarklet : <br>
    you can bookmark,the snippets of
    javascript,<br>
    by using URL "javascript: ~js code~"
    <br>
    when clicking bookmarklet, it access to the
    global object and the current Document.
    </p>
    <a href="javascript:alert((new Date()).toLocaleTimeString());">
        Check the time without overwriting the
        document
    </a><br>
    <a href="javascript:new
    Date().toLocaleTimeString();">
        What time is it?
    </a><br>
    <a href="javascript:void
        window.open('javascript:new
        Date().toLocaleTimeString();')">
        What time is it 2 ?
    </a><br>
    <a href="javascript:window.open('javascript:new
        Date().toLocaleTimeString();')">
        What time is it 2 ?
    </a><br>


    <a href='javascript:
    var e = "", r = "";
    do {
        e = prompt("Expression: " + e + "\n", e);
        try { r = "Result: " + eval(e); }
        catch(ex) { r = ex; }
        } while (e);
    void 0;
    '>
        Javascript Evaluator
    </a>
    <br>

    <h2>Execution of JS programs </h2>

    <p>
    all javascript codes in a html file or what
    was called from it, has a single Global
    Window. <br>
    This means that they all see the same
    Document Objdct.</p>

    <p>
    if web page has "iframe" element, the code
    in the embedded document has a different
    Global object. <br>
    However they can interact with each other.
    </p>

    <p>
    I Load phase<br>
     1. load code from script tag. <br>
     2. the next script tag and so on. <br>
     <br>
     II Asynchronous and Event-driven<br>
     3. the web browswer invokes event handler
     functions in response to events that occur
     asynchronously.<br>
     4. Event handlers are most commonly invoked
     in response to user input (mouse clicks,
     keystrokes, etc). <br>
    4.1 the load event == trigger ( with this, Ducument is
    fully loaded ) (1 or 2 seconds) <br>
    4.2 `onload` event handler functions (
    triggered by the load event ) <br>
    <br>
    <br>
    Note that Javascript and client-side
    Javascript is single threaded. <br>
    URL "javascript: jscode " embedded in a web page can be thought of as a type of Event Handler.<br>
    </p>

    <h2>Synchronous, Asynchronous, and Deferred
        Scripts</h2>
    <p>
     on event handler state, `ducument.write()`
     function is the unique way to change the
     Documnet.
    </p>
    <p>
    <h3>Table of factorials</h1>
    <script defer id="factorial">
function factorial(n) {
    if (n <= 1) return n;
    else return n*factorial(n-1);
};
document.write("<table>");
document.write("<tr><th>n</th><th>n!</th></tr>");
for (var i = 1; i <= 10; i++) {
    document.write("<tr><td>" + i + "</td><td>" +
        factorial(i) + "</td></tr>");
}
document.write("</table>");
document.write("Generated at " + new Date());
    </script>

    <p>
    In script tag can have "defer" and "async"
    tag.<br>
    * defer : put off , postpone<br>
    * async : not block the action of
    downloading<<br>
    </p>

    <script id="loadsync">
        var loadsync = (url) => {
            var head =
                document.getElementsByTagName("head")[0];
            var s =
                document.createElement("script");
            s.src = url;
            head.appendChild(s);
        }
    </script>


    <p>
    The next code will do the same thing as async
    attribute : <br>

    <code>
    <script>
    document.write(document.getElementById("loadsync").innerHTML);
    </script>
    </code>
    </p>


    <h2> Event-Driven Javascript </h2>


    <p>
    This synchronous code is the ancient
    JavaScript program.<br>

    <code>
    <script>
        document.write(document.getElementById("factorial").innerHTML);
    </script>
    </code>

    <br>
    </P>

    <p>
    events <br>

    * click <br>
    * change <br>
    * load <br>
    * mouseover <br>
    * keypress <br>
    * readystatechange : inicates the general type
    of event that has occured. <br>
    </p>
    <p>
    an event <br>

    * type <br>
    * target : the object on which the event occur
    <br>

    </p>

    <p>
    <h3>event handler (event listener,
        callback)</h3>

    connect a function to an event, which will do
    the response of the event<br>

    </p>

    <input type="button" id="button1">


    <p>
        HTML5 defines "web worker" <br>
        a web worker is a backgrounded thread for performing computationally intensive tasks without freezing the user interface.<br>


    </p>


    <h2> Client-Side Javascript Timeline </h2>

    <p>
    1. Document loading <br>
        `document.readyState` has the value "loading" <br>
    2. Synchronous scripts can use `document.write()` <br>
    3. Asynchronous script must not use `document.write()` <br>
    4. Document completes load, and `document.readyState = "interactive"` <br>
    5. `defer` script are executed, which must not use `document.write()` <br>
    6. The browser fires `DOMContentLoaded` event on the Document Object. This changes the phase 'Synchronous' => 'Async & Event-driven'. <br>
    7. The document is completely parsed at this point.
    8. The browser may be waiting for additional contents such as images.<br>
    9. All images and async script loaded. then `document.readyState = "complete"` .<br>
    10. From this point on, event handlers are invoked asynchronously in response to user input events, network events, timer expirations. and so on. <br>
    </p>


    <h2> Conditional Comments in IE </h2>

    <!--[if IE 6]>
    This content is actually inside an HTML comment. <br>
    It will only be displayed in IE6.
    <![endif]-->

    <!--[if lte IE 7]>
    This will be displayed in IE ...4,5,6,7<br>
    <![endif]-->

    <!--[if !IE]> <-->
    This will be displayed, but IE will not display it. <br>
    <!--> <![endif]-->

    This is normal content.




    <h2> Security </h2>

    <h4> Do not support </h4>
    <p>
    1. cannot write or delete arbitrary files or list arbitrary directories<br>
    2. cab script the HTTP protocol <br>
    3. WebSockets defines a scocket like API for communicating with specialized servers. <br>

    <h4> Restrict </h4>
    </p>
    1. can open new browser only with UI event e.g. mouse click <br>
    2. can close the current window but not the other window without User confirmation.<br>
    3. The `value` property of HTML FileUpload elements cannot be set.<br>
    4. A script cannot read the DocumentContents loaded from different servers but scripts <br>
    5. A script cannot register event listeners on documents from different servers.

    <h4> Same Origin Policy </h4>

    <p>
    the origin of Document is set as the tuple "{protocol, host, port}".<br>
    a script from different origin cannot read the Document. <br>
    </p>

    <p>
    If server B has a script B-scr and a doc B-doc,<br>
    and A-scr loads B-scr,<br>
    B-scr in A-scr cannot read A-scr and C-scr, but read B-scr.<br>
    </p>


    <p>
    If your script opened the window,<br>
    you can close it, <br>
    but it cannot "look inside" it.<br>

    </p>

    <h4> Relaxing the Same Origin Policy </h4>

    <p>
    A Doc of "dev.example.com" and a doc of "host.example.com" can see each other's documents with setting  `document.domain` = "example.com"
    </p>

    <p>/
    " extends HTTP with a new Origin " : <br>
    * reauest header <br>
    * a new Access-Control-Allow-Origin response header <br>
    </p>


    <p>
    cross-document messaging <br>
    allows a script form one document to pass texutual messages to a script in another document.<br>
    it calls `postMessage()` method see Chap 23.<br>

    </p>


    <script>
        var name = decodeURIComponent(window.location.search.substring(1)) || "";
        document.write("Hello " + name) ;
    </script>


    <p>
    access to ".../index.html?hoge",
    The above code will display "Hello hoge"
    </p>


# Window Object


## `location`

`window.location` : keeps URI

## `history`

`window.history.go(-1)` : go back to the previous window








</body>
</html>
