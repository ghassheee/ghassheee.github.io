---
title: ArchLinux
layout: dep
date: 2017-06-11
---


~~~
ip link show
ip link set enxxxxx up      ## connect to internet with lan cable
~~~


# Minimal Installation
~~~

DISK="/dev/sda"
HOST="ghasshee"

partitioning(){
    gdisk /dev/$DISK_LOCATION
    #> Command : o (create partition table)
    #> Command : n    >>> 1      >>>         >>> +512M   >>> ef00 (UEFI System Partition)
    #> Command : n    >>> 2      >>>         >>> +32G    >>> 8200 (swap:    8200)
    #> Command : n    >>> 3      >>>         >>>         >>>      (Default: 8300)
    #> Command : w (write)
}


mkfs.fat -F32   ${DISK}1
mkswap          ${DISK}2 && swapon /dev/${DISK}2
mkfs.btrfs -f   ${DISK}3

mount ${DISK}3 /mnt
mkdir /mnt/boot && mount ${DISK}1 /mnt/boot

pacstrap /mnt base base-devel


genfstab -U -p /mnt >> /mnt/etc/fstab


arch-chroot /mnt /bin/bash


## install tools
pacman -S vim zsh curl wget git


echo "en_US.UTF-8 UTF-8" >> /etc/locale.gen
echo "ja_JP.UTF-8 UTF-8" >> /etc/locale.gen
locale-gen


export_language(){
    echo LANG=en_US.UTF-8 > /etc/locale.conf
    export LANG=en_US.UTF-8
}

set_time(){
    ln -s /usr/share/zoneinfo/Asia/Tokyo /etc/localtime
    hwclock --systohc --utc
}

set_hosts(){
    echo "# /etc/hosts: static lookup table for host names" > /etc/hosts
    echo "# IP      hostname.domain.org=""          hostname "      >> /etc/hosts
    echo "127.0.0.1 localhost.localdomain localhost $YOURHOSTNAME"  >> /etc/hosts
    echo "::1       localhost.localdomain localhost $YOURHOSTNAME"  >> /etc/hosts
}

## make memory table loader
pacman -S btrfs-progs
mkinitcpio -p linux


## set root password
passwd


## GRUB
pacman -S grub dosfstools efibootmgr
grub-install --target=x86_64-efi --efi-directory=/boot --bootloader-id=arch_grub --recheck --debug
grub-mkconfig -o /boot/grub/grub.cfg


## optional
## in case your machine can run with a specified efi file
## mkdir /boot/EFI/boot
## cp /boot/EFI/arch_grub/grubx64.efi  /boot/EFI/boot/bootx64.efi

exit
reboot

## remove install media
~~~



# X and GUI Installation
~~~
## networks
systemctl enable dhcpcd.service && systemctl start dhcpcd.service
systemctl enable netctl && systemctl start netctl

## create user and login
useradd -m -g wheel ghasshee
pacman -S sudo
visudo
# decomment Defaults env_keep += "HOME"   //set $HOME
# decomment %wheel ALL=(ALL) all
# :wq!
passwd ghasshee     ## set password for ghasshee
su ghasshee


## GUI  ## video will be reinstalled
sudo pacman -S xorg-server xorg-apps xorg-xinit xorg-xclock xterm
sudo pacman -S xfce4 xfce4-goodies gamin

## Yaourt
sudo echo "[archlinuxfr]" >> /etc/pacman.conf
sudo echo "SigLevel = Never" >> /etc/pacman.conf
sudo echo "Server = http://repo.archlinux.fr/\$arch" >> /etc/pacman.conf
sudo pacman -Sy yaourt
yaourt -Syua

## Speed Up Yaourt
sudo vim /etc/makepkg.conf
MAKEFLAGS="-j17"

## Video
lspci | grep VGA
sudo pacman -S nvidia-dkms

## what is dkms ?
## dkms := Dynamic Kernel Module System
## further info : see man dkms
dkms status         ## nvidia xxx.xxx installed


## Font
yaourt -S ttf-ricty ttf-mona otf-takao otf-ipaexfont

## Display Manager (Login Manager)
sudo pacman -S slim archlinux-themes-slim slim-themes
sudo vim /etc/slim.conf
# login_cmd exec /usr/bin/zsh -l ~/.xinitrc %session
# daemon yes
# current_theme archlinux-simplyblack
sudo systemctl enable slim.service

## Text
sudo pacman -S fcitx-im fcitx-anthy fcitx-configtool

## Russian & Japanese Input2ch
sudo pacman -S ibus ibus-anthy ibus-m17n

## Install Dotfiles
sudo pacman -S openssh
git clone dotfiles

## Apperrance
yaourt -S numix-themes-green numix-circle-icon-theme-git

## Sound
sudo pacman -S alsa-utils
sudo alsactl store
## when Sound not work
## $ aplay -l           ## see which card you want to use
## $ vim ~/.asoundrc    ## or $ vim /etc/asound.conf
## pcm.!default {
## 	    type hw
##  	card 1
## }
## ctl.!default {
##  	type hw
##  	card 1
## }
sudo pacman -S pulseaudio

## Mouse Driver
sudo pacman -S xf86-input-synaptics xf86-input-mouse

## Bluetooth
sudo pacman -S bluez bluez-utils
modprobe btusb
sudo systemctl enable bluetooth && sudo systemctl start bluetooth
## conect bluetooth mouse
## $ bluetoothctl
## [bluetooth] list
## Controller <controller mac> ...
## [bluetooth] select <controller mac>
## [bluetooth] power on
## [bluetooth] scan on
## [bluetooth] agent on
## [bluetooth] devices          ## push connect button on mouse
## Device <mouse mac> ...
## [bluetooth] pair <mouse mac>
## [bluetooth] trust <mouse mac>
## [bluetooth] connect <mouse mac>

## Network Time Protocol
sudo pacman -S ntp && systemctl enable ntpd


## Reboot
sudo reboot


## Thunar Supplements
sudo pacman -S thunar-volman thunar-media-tags-plugin thunar-archive-plugin file-roller
exo-preffered-application

## Dropbox
yaourt -S dropbox thunar-dropbox

## Browser
sudo pacman -S chromium firefox

## Tools
sudo gem install jekyll mechanize
yaourt -S xcalib
sudo pacman -S okular tmux ffmpeg atom sshfs expect bc cowsay sl sdcv xsel tree arp-scan perl-rename mlocate && sudo updatedb
yaourt -S tty-clock talking-clock-git festival festival-english festival-us espeak


## OCaml Haskell Rust
sudo pacman -S opam && opam init && opam install utop
sudo pacman -S stack && stack install ghci --install-ghc
curl https://sh.rustup.rs -sSf | sh

## Music tips
sudo pacman -S sox
sudo pacman -S libid3tag libmad         ## optional library for mp3
sudo pacman -S youtube-dl

## Ethereum
git clone http://www.github.com/paritytech/parity && cd parity && cargo build --release
sudo pacman -S geth

## DVD / mplayer
sudo pacman -S dvdauthor
sudo pacman -S dvd+rw-tools
sudo pacman -S mplayer


## HFS / HFS+ (Apple File System)
sudo pacman -S hfsprogs



yaourt -S vokoscreen cheese --noconfirm



sudo pacman -S gnuplot

## Crontab
sudo pacman -S cronie
edit cron
systemctl enable cronie && systemctl start cronie


~~~
