---
title: Arch Linux OS
layout: dep
date: 2000-01-02
---


# Make an Install USB Media

~~~sh
sudo diskutil list                                                  ## lsblk @Linux
sudo dd if=archlinux.img of=/dev/rdiskx bs=100m
~~~



# PRECONDITION

~~~sh
## loadkeys jp106                               ## IF JP Keyboard

wifi-menu                                       ## connect Wifi

ls /sys/firmware/efi/efivars                    ## see if efi-variables exist
# ls /sys/firmware/                             ## see if efi exists
~~~

# Minimal Installation

~~~sh
DISK="/dev/sdx"


gdisk /dev/$DISK
##      o => y =>                               ## '=>' denotes 'Enter key'
##      n => => => +512M => ef00 =>             ## UEFI: ef00
##      n => => => +16G  => 8200 =>             ## SWAP: 8200
##      n => => =>       =>      =>             ## Default: 8300
##      w => y =>


mkfs.fat -F32   ${DISK}1
mkswap          ${DISK}2 && swapon ${DISK}2
mkfs.btrfs -f   ${DISK}3                        ## OPTION [ mkfs.xfs mkfs.ext4 ]


mount ${DISK}3 /mnt
mkdir /mnt/boot && mount ${DISK}1 /mnt/boot


timedatectl set-ntp true                        ## set systemclock


vim /etc/pacman.d/mirrorlist                    ## choose Mirror Server


pacstrap /mnt base base-devel


genfstab -U -p /mnt >> /mnt/etc/fstab           ## -p excludes pseudofs mounts


arch-chroot /mnt /bin/bash


pacman -S vim tmux zsh curl wget git openssh


zsh


YOURHOSTNAME="ghasshee"


echo "en_US.UTF-8 UTF-8" >> /etc/locale.gen
echo "ja_JP.UTF-8 UTF-8" >> /etc/locale.gen
echo "ru_RU.UTF-8 UTF-8" >> /etc/locale.gen
locale-gen


echo LANG=en_US.UTF-8 > /etc/locale.conf


ln -sf /usr/share/zoneinfo/Asia/Tokyo /etc/localtime
hwclock --systohc --utc


echo $YOURHOSTNAME > /etc/hostname


echo "# IP      hostname.domain.org=""          hostname "      >> /etc/hosts
echo "127.0.0.1 localhost.localdomain localhost $YOURHOSTNAME"  >> /etc/hosts
echo "::1       localhost.localdomain localhost $YOURHOSTNAME"  >> /etc/hosts


pacman -S btrfs-progs                           ## IF(BTRFS)


mkinitcpio -p linux


passwd                                          ## Root Password


pacman -S grub dosfstools efibootmgr
grub-install --target=x86_64-efi --efi-directory=/boot --bootloader-id=arch_grub --recheck --debug
mkdir /boot/EFI/boot && cp /boot/EFI/arch_grub/grubx64.efi /boot/EFI/boot/bootx64.efi
grub-mkconfig -o /boot/grub/grub.cfg


pacman -S networkmanager                        ## IF(wifi)
systemctl enable NetworkManager


exit
reboot                                          ## remove install media

#########################################

## IF(WIFI)
nmcli dev wifi connect $WIFINAME password $WIFIPASSWORD

## IF(LAN cable)
## systemctl enable dhcpcd.service && systemctl start dhcpcd.service
## systemctl enable netctl && systemctl start netctl
~~~
